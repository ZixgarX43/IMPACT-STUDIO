<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMPACT | Admin Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <!-- Top Navbar -->
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">IMPACT Admin<span class="dot">.</span></a>
            <div class="nav-actions">
                <span id="adminUsername" style="margin-right: 15px; color: #666;"></span>
                <button id="logoutBtn" class="btn btn-secondary">ออกจากระบบ</button>
            </div>
        </div>
    </nav>

    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="sidebar-menu">
                <a href="#dashboard" class="sidebar-item active" data-section="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#products" class="sidebar-item" data-section="products">
                    <i class="fas fa-box"></i>
                    <span>จัดการสินค้า</span>
                </a>
                <a href="#categories" class="sidebar-item" data-section="categories">
                    <i class="fas fa-tags"></i>
                    <span>จัดการหมวดหมู่</span>
                </a>
                <a href="#users" class="sidebar-item" data-section="users">
                    <i class="fas fa-users"></i>
                    <span>จัดการสมาชิก</span>
                </a>
                <a href="#reports" class="sidebar-item" data-section="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>รายงานและสถิติ</span>
                </a>
                <a href="#banner" class="sidebar-item" data-section="banner">
                    <i class="fas fa-image"></i>
                    <span>จัดการโปรโมท</span>
                </a>
                <a href="#general-settings" class="sidebar-item" data-section="general-settings">
                    <i class="fas fa-cog"></i>
                    <span>ตั้งค่าทั่วไป</span>
                </a>
                <a href="#settings" class="sidebar-item" data-section="settings">
                    <i class="fas fa-palette"></i>
                    <span>จัดการธีม</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Dashboard Section -->
            <section id="dashboard-section" class="admin-section active">
                <h1 class="admin-title">Dashboard Overview</h1>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #4CAF50;">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalSales">฿0.00</h3>
                            <p>ยอดขายทั้งหมด</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #2196F3;">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalUsers">0</h3>
                            <p>สมาชิกทั้งหมด</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #FF9800;">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalProducts">0</h3>
                            <p>สินค้าทั้งหมด</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #9C27B0;">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="conversionRate">0%</h3>
                            <p>อัตราแปลงยอด</p>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>ยอดขาย</h3>
                            <div class="chart-controls">
                                <button class="btn-chart active" data-period="daily">รายวัน</button>
                                <button class="btn-chart" data-period="weekly">รายสัปดาห์</button>
                            </div>
                        </div>
                        <canvas id="salesChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>สินค้าขายดี Top 5</h3>
                        <canvas id="topProductsChart"></canvas>
                    </div>
                </div>

                <!-- Recent Transactions -->
                <div class="data-card">
                    <h3>รายการซื้อล่าสุด</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>วันที่</th>
                                <th>ผู้ใช้</th>
                                <th>สินค้า</th>
                                <th>ยอดเงิน</th>
                            </tr>
                        </thead>
                        <tbody id="recentTransactions">
                            <tr>
                                <td colspan="4" style="text-align: center; color: #999;">ยังไม่มีรายการ</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Products Section -->
            <section id="products-section" class="admin-section">
                <h1 class="admin-title">จัดการสินค้า</h1>

                <div class="section-actions">
                    <button class="btn btn-primary" onclick="openAddProductModal()">
                        <i class="fas fa-plus"></i> เพิ่มสินค้าใหม่
                    </button>
                    <input type="text" id="searchProducts" placeholder="ค้นหาสินค้า..." class="search-input">
                </div>

                <div class="data-card">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>รูปภาพ</th>
                                <th>ชื่อสินค้า</th>
                                <th>ราคา</th>
                                <th>สต๊อก</th>
                                <th>การันตี</th>
                                <th>หมวดหมู่</th>
                                <th>ยอดขาย</th>
                                <th>จัดการ</th>
                            </tr>
                        </thead>
                        <tbody id="productsTable">
                            <!-- Products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Categories Section -->
            <section id="categories-section" class="admin-section">
                <h1 class="admin-title">จัดการหมวดหมู่</h1>

                <div class="section-actions">
                    <button class="btn btn-primary" onclick="openAddCategoryModal()">
                        <i class="fas fa-plus"></i> เพิ่มหมวดหมู่ใหม่
                    </button>
                </div>

                <div class="category-grid-admin" id="categoriesGrid">
                    <!-- Categories will be loaded here -->
                </div>
            </section>

            <!-- Users Section -->
            <section id="users-section" class="admin-section">
                <h1 class="admin-title">จัดการสมาชิก</h1>

                <div class="section-actions">
                    <input type="text" id="searchUsers" placeholder="ค้นหาสมาชิก..." class="search-input">
                </div>

                <div class="data-card">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Role</th>
                                <th>Points</th>
                                <th>สถานะ</th>
                                <th>วันที่สมัคร</th>
                                <th>จัดการ</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <!-- Users will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports-section" class="admin-section">
                <h1 class="admin-title">รายงานและสถิติ</h1>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #00BCD4;">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalVisitors">0</h3>
                            <p>ผู้เข้าชมทั้งหมด</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #E91E63;">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalOrders">0</h3>
                            <p>ออเดอร์ทั้งหมด</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #3F51B5;">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="avgOrderValue">฿0.00</h3>
                            <p>มูลค่าเฉลี่ยต่อออเดอร์</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #FF5722;">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="topProduct">-</h3>
                            <p>สินค้าขายดีที่สุด</p>
                        </div>
                    </div>
                </div>

                <div class="data-card">
                    <h3>สินค้าขายดี Top 10</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>ชื่อสินค้า</th>
                                <th>จำนวนที่ขาย</th>
                                <th>รายได้</th>
                            </tr>
                        </thead>
                        <tbody id="topProductsTable">
                            <!-- Top products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Banner Management Section -->
            <section id="banner-section" class="admin-section">
                <h1 class="admin-title">จัดการรูปโปรโมท (Banner)</h1>

                <div class="data-card">
                    <div class="info-alert"
                        style="background: #E1F5FE; padding: 15px; border-radius: 10px; margin-bottom: 20px; font-size: 0.9rem; color: #01579B; border-left: 5px solid #03A9F4;">
                        <i class="fas fa-info-circle"></i> แนะนำขนาดรูปภาพ Banner: 2200 x 590 px เพื่อความสวยงามที่สุด
                    </div>

                    <form id="bannerForm">
                        <div class="form-group">
                            <label>รูปภาพ Banner</label>
                            <input type="file" id="bannerImageInput" accept="image/*">
                            <div class="banner-preview-container"
                                style="margin-top: 15px; border: 2px dashed #ddd; border-radius: 15px; overflow: hidden; position: relative; aspect-ratio: 2200/590;">
                                <img id="bannerPreview" src=""
                                    style="width: 100%; height: 100%; object-fit: cover; display: none;">
                                <div id="bannerPlaceholder"
                                    style="position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #999;">
                                    <i class="fas fa-cloud-upload-alt"
                                        style="font-size: 3rem; margin-bottom: 10px;"></i>
                                    <p>คลิกเพื่ออัปโหลดรูปภาพใหม่</p>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 30px; display: flex; gap: 15px;">
                            <button type="submit" class="btn btn-primary" style="flex: 1; padding: 15px;">
                                <i class="fas fa-save"></i> บันทึกการตั้งค่า
                            </button>
                            <button type="button" id="resetBannerBtn" class="btn btn-secondary">
                                <i class="fas fa-undo"></i> คืนค่าเริ่มต้น
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- General Settings Section -->
            <section id="general-settings-section" class="admin-section">
                <h1 class="admin-title">ตั้งค่าข้อมูลเว็บไซต์ (General Settings)</h1>

                <div class="data-card">
                    <h3><i class="fas fa-info-circle" style="color: var(--secondary-color);"></i> ข้อมูลทั่วไป</h3>
                    <form id="generalSettingsForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label>ชื่อเว็บไซต์ (Logo Text)</label>
                                <input type="text" id="settingSiteName" placeholder="เช่น Capybara STORE">
                            </div>
                            <div class="form-group">
                                <label>สโลแกน (Tagline)</label>
                                <input type="text" id="settingTagline" placeholder="เช่น เติมเกม ราคาถูก ปลอดภัย">
                            </div>
                        </div>

                        <hr style="margin: 30px 0; border: 0; border-top: 1px solid #eee;">

                        <h3><i class="fab fa-facebook" style="color: #1877F2;"></i> ข้อมูล Facebook Widget</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>ชื่อเพจที่แสดง</label>
                                <input type="text" id="settingFbName" placeholder="เช่น Over System - O...">
                            </div>
                            <div class="form-group">
                                <label>จำนวนผู้ติดตาม (ข้อความ)</label>
                                <input type="text" id="settingFbFollowers" placeholder="เช่น 1,057 ผู้ติดตาม">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>ข้อความบนแบนเนอร์วิดเจ็ต</label>
                                <input type="text" id="settingFbBannerText" placeholder="เช่น โปรโมชั่นเทศกาลตรุษจีน">
                            </div>
                            <div class="form-group">
                                <label>ลิงก์เพจ Facebook</label>
                                <input type="url" id="settingFbUrl" placeholder="https://facebook.com/yourpage">
                            </div>
                        </div>

                        <hr style="margin: 30px 0; border: 0; border-top: 1px solid #eee;">

                        <h3><i class="fas fa-copyright" style="color: #666;"></i> ข้อมูลท้ายเว็บ (Footer)</h3>
                        <div class="form-group">
                            <label>ข้อความ Copyright</label>
                            <input type="text" id="settingCopyright"
                                placeholder="เช่น 2025 OVSM CLOUD | Model Capybara">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>ลิงก์ติดต่อ 1 (แจ้งปัญหา)</label>
                                <input type="url" id="settingContactLink1" placeholder="https://...">
                            </div>
                            <div class="form-group">
                                <label>ลิงก์ติดต่อ 2 (โกง)</label>
                                <input type="url" id="settingContactLink2" placeholder="https://...">
                            </div>
                        </div>

                        <hr style="margin: 30px 0; border: 0; border-top: 1px solid #eee;">

                        <h3><i class="fas fa-list-ul" style="color: #666;"></i> รายสมรรถนะร้านค้า (Footer Features)</h3>
                        <div class="form-group">
                            <label>ข้อความที่ 1</label>
                            <input type="text" id="settingFooterF1"
                                placeholder="เช่น WebSite OVSM ราคา เริ่มต้น 79 บาท">
                        </div>
                        <div class="form-group">
                            <label>ข้อความที่ 2</label>
                            <input type="text" id="settingFooterF2"
                                placeholder="เช่น เว็บไซต์ ขายแอปพรีเมี่ยม / ID เกม ต้อง OVSM">
                        </div>
                        <div class="form-group">
                            <label>ข้อความที่ 3</label>
                            <input type="text" id="settingFooterF3"
                                placeholder="เช่น ราคาถูก อัพเดทตลอด เว็บไซต์ออนไลน์ตลอด 24/7">
                        </div>

                        <div style="margin-top: 30px;">
                            <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px;">
                                <i class="fas fa-save"></i> บันทึกข้อมูลเว็บไซต์
                            </button>
                        </div>
                    </form>
                </div>
            </section>

            <!-- Theme Settings Section -->
            <section id="settings-section" class="admin-section">
                <h1 class="admin-title">จัดการธีมเว็บไซต์ (Theme Settings)</h1>

                <div class="data-card">
                    <form id="themeForm">
                        <div class="form-group">
                            <label>โหมดการจัดการธีม</label>
                            <div style="display: flex; gap: 20px; margin-top: 10px;">
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="radio" name="themeMode" value="preset" checked> ใช้แบบสำเร็จรูป
                                    (Presets)
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                    <input type="radio" name="themeMode" value="custom"> กำหนดเอง (Custom)
                                </label>
                            </div>
                        </div>

                        <!-- Preset Section -->
                        <div id="preset-controls" class="form-group" style="margin-top: 20px;">
                            <label>เลือกโทนสีสำเร็จรูป</label>
                            <select id="themeSelect" class="form-control"
                                style="width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; margin-top: 10px; font-size: 1rem;">
                                <option value="light-blue">สีฟ้าอ่อน (Light Blue)</option>
                                <option value="capybara-orange">สีส้มคาปิบาร่า (Capybara Orange)</option>
                                <option value="deep-purple">สีม่วงเข้ม (Deep Purple)</option>
                                <option value="soft-pink">สีชมพูอ่อน (Soft Pink)</option>
                                <option value="emerald-green">สีเขียวมรกต (Emerald Green)</option>
                                <option value="royal-gold">สีทองอร่าม (Royal Gold)</option>
                                <option value="midnight-red">สีแดงเที่ยงคืน (Midnight Red)</option>
                                <option value="modern-dark">มืดทันสมัย (Modern Dark)</option>
                            </select>
                        </div>

                        <!-- Custom Color Section -->
                        <div id="custom-controls" class="form-group" style="margin-top: 20px; display: none;">
                            <label>กำหนดสีด้วยตนเอง</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 10px;">
                                <div>
                                    <label style="font-size: 0.85rem; color: #666;">สีหลัก (Primary Color)</label>
                                    <div style="display: flex; gap: 10px; margin-top: 5px;">
                                        <input type="color" id="custom-primary"
                                            style="width: 50px; height: 40px; border: none; padding: 0; border-radius: 5px; cursor: pointer;">
                                        <input type="text" id="custom-primary-hex" placeholder="#000000"
                                            style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 5px; font-family: monospace;">
                                    </div>
                                </div>
                                <div>
                                    <label style="font-size: 0.85rem; color: #666;">สีรอง (Secondary Color)</label>
                                    <div style="display: flex; gap: 10px; margin-top: 5px;">
                                        <input type="color" id="custom-secondary"
                                            style="width: 50px; height: 40px; border: none; padding: 0; border-radius: 5px; cursor: pointer;">
                                        <input type="text" id="custom-secondary-hex" placeholder="#000000"
                                            style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 5px; font-family: monospace;">
                                    </div>
                                </div>
                                <div style="grid-column: span 2;">
                                    <label style="font-size: 0.85rem; color: #666;">สีเน้น (Accent Color)</label>
                                    <div style="display: flex; gap: 10px; margin-top: 5px;">
                                        <input type="color" id="custom-accent"
                                            style="width: 50px; height: 40px; border: none; padding: 0; border-radius: 5px; cursor: pointer;">
                                        <input type="text" id="custom-accent-hex" placeholder="#000000"
                                            style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 5px; font-family: monospace;">
                                    </div>
                                </div>
                            </div>
                            <p style="font-size: 0.8rem; color: #888; margin-top: 10px;">
                                <i class="fas fa-info-circle"></i>
                                สีพื้นหลังและสีปุ่มจะถูกคำนวณอัตโนมัติจากสีที่คุณเลือก
                            </p>
                        </div>

                        <div style="margin-top: 30px;">
                            <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px;">
                                <i class="fas fa-save"></i> บันทึกและนำไปใช้ทั่วทั้งเว็บ
                            </button>
                            <div class="data-card" style="margin-top: 20px;">
                                <h3>ตัวอย่างสีปัจจุบัน</h3>
                                <div style="display: flex; gap: 15px; margin-top: 15px;">
                                    <div style="flex: 1; text-align: center;">
                                        <div id="preview-primary"
                                            style="height: 50px; border-radius: 10px; background: var(--primary-color);">
                                        </div>
                                        <p style="font-size: 0.8rem; margin-top: 5px;">Primary</p>
                                    </div>
                                    <div style="flex: 1; text-align: center;">
                                        <div id="preview-secondary"
                                            style="height: 50px; border-radius: 10px; background: var(--secondary-color);">
                                        </div>
                                        <p style="font-size: 0.8rem; margin-top: 5px;">Secondary</p>
                                    </div>
                                    <div style="flex: 1; text-align: center;">
                                        <div id="preview-accent"
                                            style="height: 50px; border-radius: 10px; background: var(--accent-color);">
                                        </div>
                                        <p style="font-size: 0.8rem; margin-top: 5px;">Accent</p>
                                    </div>
                                </div>
                            </div>

                            <div class="data-card" style="margin-top: 20px;">
                                <h3><i class="fab fa-discord" style="color: #5865F2;"></i> ตั้งค่า Discord Webhook</h3>
                                <p style="font-size: 0.9rem; color: #666; margin-bottom: 20px;">
                                    รับการแจ้งเตือนทันทีเมื่อมีสมาชิกใหม่ ซื้อสินค้า หรือเติมเงิน</p>

                                <form id="discordForm">
                                    <div class="form-group">
                                        <label>Discord Webhook URL</label>
                                        <input type="url" id="discordWebhookUrl"
                                            placeholder="https://discord.com/api/webhooks/..."
                                            style="width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ddd; margin-top: 10px; font-size: 1rem;">
                                    </div>
                                    <div style="margin-top: 20px; display: flex; gap: 15px;">
                                        <button type="submit" class="btn btn-primary" style="flex: 1; padding: 12px;">
                                            <i class="fas fa-save"></i> บันทึก Webhook
                                        </button>
                                        <button type="button" id="testDiscordBtn" class="btn btn-secondary"
                                            style="padding: 12px 20px;">
                                            <i class="fas fa-paper-plane"></i> ทดสอบแจ้งเตือน
                                        </button>
                                    </div>
                                </form>
                            </div>
            </section>
        </main>
    </div>

    <!-- Add/Edit Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="productModalTitle">เพิ่มสินค้าใหม่</h2>
                <span class="close" onclick="closeProductModal()">&times;</span>
            </div>
            <form id="productForm">
                <input type="hidden" id="productId">
                <div class="form-row">
                    <div class="form-group">
                        <label>ชื่อสินค้า *</label>
                        <input type="text" id="productName" required>
                    </div>
                    <div class="form-group">
                        <label>หมวดหมู่ *</label>
                        <select id="productCategory" required>
                            <option value="">เลือกหมวดหมู่</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>รายละเอียด *</label>
                    <textarea id="productDesc" rows="3" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ราคา (บาท) *</label>
                        <input type="number" id="productPrice" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>ราคาเต็ม (บาท)</label>
                        <input type="number" id="productOldPrice" min="0" step="0.01">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>จำนวนสต๊อก *</label>
                        <input type="number" id="productStock" min="0" value="999" required>
                    </div>
                    <div class="form-group">
                        <label>การันตี *</label>
                        <select id="productWarranty" required>
                            <option value="none">ไม่มีการันตี</option>
                            <option value="7days">7 วัน</option>
                            <option value="30days">30 วัน</option>
                            <option value="90days">90 วัน</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>ข้อมูลสินค้า / ไอดี (ส่งทันทีในประวัติการซื้อ) *</label>
                    <textarea id="productInfo" rows="3" placeholder="เช่น user:pass หรือ ลิงก์ดาวน์โหลด"
                        required></textarea>
                </div>
                <div class="form-group">
                    <label>รูปภาพสินค้า</label>
                    <input type="file" id="productImage" accept="image/*">
                    <img id="productImagePreview" style="max-width: 200px; margin-top: 10px; display: none;">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeProductModal()">ยกเลิก</button>
                    <button type="submit" class="btn btn-primary">บันทึก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Category Modal -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="categoryModalTitle">เพิ่มหมวดหมู่ใหม่</h2>
                <span class="close" onclick="closeCategoryModal()">&times;</span>
            </div>
            <form id="categoryForm">
                <input type="hidden" id="categoryId">
                <div class="form-group">
                    <label>ชื่อหมวดหมู่ *</label>
                    <input type="text" id="categoryName" required>
                </div>
                <div class="form-group">
                    <label>รูปภาพหมวดหมู่</label>
                    <input type="file" id="categoryImage" accept="image/*">
                    <img id="categoryImagePreview" style="max-width: 200px; margin-top: 10px; display: none;">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeCategoryModal()">ยกเลิก</button>
                    <button type="submit" class="btn btn-primary">บันทึก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Detail Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>รายละเอียดสมาชิก</h2>
                <span class="close" onclick="closeUserModal()">&times;</span>
            </div>
            <div id="userDetailContent">
                <!-- User details will be loaded here -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="admin-script.js"></script>
    <script>
        // Check if admin
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (!currentUser || currentUser.role !== 'admin') {
            alert('สำหรับผู้ดูแลระบบเท่านั้น');
            window.location.href = 'login.html';
        } else {
            document.getElementById('adminUsername').textContent = `สวัสดี, ${currentUser.username}`;
        }
    </script>
</body>

</html>